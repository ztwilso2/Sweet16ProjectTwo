<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>MentorMe</title>
    <link rel="stylesheet" type="text/css" href="StyleSheet1.css">
    
</head>

<body>
    <header>
        <div class="header">
            <h1>MentorMe</h1>
            <p>Mentoring for Professionals Everywhere</p>
            <nav>
                <ul>
                    <li onclick="LogOff()"><a href="">Logout</a></li>
                    <li><a href="homepage.html">Home</a></li>
                    <li><a href="profile.html">Profile</a></li>
                    <li></li>
                </ul>
            </nav>
        </div>
    </header>

    <section id="layout">
        
            <h2>Available Mentors</h2>
            <form>
                <div id="mentorList">

                </div>
            </form>
                
    </section>

    <footer>
        <p>Made By: Sweet 16</p>
        <p>Brittney Ginther, Janelle Halter, Ben Mack, Alexis Ross, Zack Wilson</p>
    </footer>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script type="text/javascript">

        document.addEventListener("load", loadMentors());
        //document.getElementById("createButton").addEventListener("click", loadEvents);


        //accessing the user ID for the session on each page You can use this format
        //1. Store it in a local variable and go from there. For some reason, only works w/in scope of function
        //2. use the localStorage.getItem("sessionId") directly
        
            //userId = localStorage.getItem("sessionId");
           // alert(userId);
            //alert(localStorage.getItem("sessionId"));
        


        function goToLogOn() {
            window.location.assign("./loginPage.html")
        }



        //function currentDate() {
        //   var today = new Date();
        //    var day = today.getDate()
        //    var month = today.getMonth() + 1
        //    var year = today.getFullYear()

        //    month = (month < 10 ? "0" : "") + month;
        //    day = (day < 10 ? "0" : "") + day;

        //    var date = year + "-" + month + "-" + day

        //    document.getElementById('newDate').value = date;
        //}

        //var rsvpCount;
        //function RSVP(eventId) {
        //    var webMethod = "ProjectServices.asmx/GetRSVPCount";
        //    var parameters = "{\"eventId\":\"" + encodeURI(eventId) + "\"}";
            
        //    $.ajax({
        //        async: false,
        //        type: "POST",
        //        url: webMethod,
        //        data: parameters,
        //        contentType: "application/json; charset=utf-8",
        //        dataType: "json",
        //        success: function (msg) {
        //            if (msg.d) {
                        
        //                rsvpCount = Number(msg.d[0].rsvpCount);
        //                rsvpCount++;

        //            }
        //            else {
        //                alert("Error")
        //            }
        //        },
        //        error: function (e) {
        //            alert("Error with the server. Please try again.");
        //        }
        //    });

            

        //    var webMethod2 = "ProjectServices.asmx/UpdateRSVP";
        //    var parameters2 = "{\"eventId\":\"" + encodeURI(eventId) + "\",\"rsvpCount\":\"" + encodeURI(rsvpCount) + "\"}";

        //    $.ajax({
        //        async: false,
        //        type: "POST",
        //        url: webMethod2,
        //        data: parameters2,
        //        contentType: "application/json; charset=utf-8",
        //        dataType: "json",
        //        success: function (msg) {
        //            if (msg.d) {
                        
        //            }
        //            else {
        //                alert("Error")
        //            }
        //        },
        //        error: function (e) {
        //            alert("Error with the server. Please try again.");
        //        }
        //    });

        //    loadEvents();
        //    document.getElementById(eventId).disabled = true;
         
        //}

        ////LogOffFunction
        function LogOff() {

            var webMethod = "ProjectServices.asmx/LogOff";

            $.ajax({
                type: "POST",
                url: webMethod,
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (msg) {
                    if (msg.d) {
                        //we logged off, so go back to logon page
                        goToLogOn();

                    }
                    else {
                        alert("Error")
                    }
                },
                error: function (e) {
                    
                }
            });
        }

        //function newEvent() {
        //    var webMethod = "ProjectServices.asmx/NewEvent";
        //    var creatorId = localStorage.getItem("sessionId");
        //    var className = $('#newClassName').val();
        //    var desc = $('#newDesc').val();
        //    var date = $('#newDate').val();
        //    var time = $('#newTime').val();
        //    var location = $('#newLocation').val();
        //    var rsvpCount = 0;
        //    var parameters = "{\"className\":\"" + encodeURI(className) + "\",\"desc\":\"" + encodeURI(desc) + "\",\"date\":\"" + encodeURI(date) + "\",\"time\":\"" + encodeURI(time) + "\",\"location\":\"" + encodeURI(location) + "\",\"creatorId\":\"" + encodeURI(creatorId) + "\",\"rsvpCount\":\"" + encodeURI(rsvpCount) + "\"}";
        //    $.ajax({
        //        type: "POST",
        //        url: webMethod,
        //        data: parameters,
        //        contentType: "application/json; charset=utf-8",
        //        dataType: "json",
        //        success: function (msg) {
        //            alert("Event added.");
        //        },
        //        error: function (e) {
        //            alert("An error was encountered. Please try again.");
        //        }
        //    });
        //}

                
        //var eventsArray;
        //var usersArray;

        function loadMentors() {
            var webMethod = "ProjectServices.asmx/GetProfiles";
           
                   
            $.ajax({
                type: "POST",
                url: webMethod,
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (msg) {
                    
                    if (msg.d.length > 0) {
                                                
                        profilesArray = msg.d;
                        
                        for (var i = 0; i < profilesArray.length; i++) {
                                                                                 

                            var profile = "<div class='profileCard'>" +
                                "<div class='nameBar'>" + profilesArray[i].fName + " " + profilesArray[i].lName+ "'s Event: </div> <br>" +
                                "Job: " + profilesArray[i].jobTitle + "<br>" +
                                "Expertise: " + profilesArray[i].expertise + "<br>" +
                                "</div>" +
                                "<hr>";

                            
                            $("#mentorList").append(profile);
                            
                        }

                    }
                },
                error: function (e) {
                    alert("Can't load events." + e);
                }
            });
        }
    </script>

</body>
</html>
